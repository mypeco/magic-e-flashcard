<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒã‚¸ãƒƒã‚¯eãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰</title>

    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âœ¨</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif; }
        select { cursor: pointer; }
        button { cursor: pointer; }
        .letter-box {
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            border-radius: 12px;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 50px rgba(0,0,0,0.3);
        }
        .modal.show {
            display: block;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-green-50 to-blue-50 p-4">
    <div id="app" class="max-w-6xl mx-auto"></div>

    <!-- ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="infoModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-blue-600">ğŸ“˜ ä¿è­·è€…ãƒ»æ•™è‚²è€…ã®æ–¹ã¸</h2>
                <button onclick="closeModal()" class="text-4xl text-gray-500 hover:text-gray-700 font-bold leading-none">&times;</button>
            </div>
            
            <div class="space-y-6">
                <!-- ãƒã‚¸ãƒƒã‚¯eã®ãƒ«ãƒ¼ãƒ«ã¨ä¾‹å¤– -->
                <section>
                    <h3 class="text-xl font-bold text-gray-800 mb-3">âš ï¸ ãƒã‚¸ãƒƒã‚¯eã«ã¯ä¾‹å¤–ãŒã‚ã‚Šã¾ã™</h3>
                    <div class="bg-yellow-50 border-2 border-yellow-300 rounded-lg p-4">
                        <p class="text-gray-700 mb-3 text-base">
                            ãƒã‚¸ãƒƒã‚¯eã¯<strong>ã€Œã ã„ãŸã„å½“ã¦ã¯ã¾ã‚‹ãƒ«ãƒ¼ãƒ«ã€</strong>ã§ã™ã€‚
                        </p>
                        <p class="text-sm text-gray-600 mb-3">
                            <strong>ä¾‹å¤–ã®ä¾‹ï¼š</strong>come, some, love, give, have, done, gone ãªã©
                        </p>
                        <p class="text-sm text-gray-600">
                            ãƒ«ãƒ¼ãƒ«ã‚’çŸ¥ã£ã¦ã„ã‚‹ã¨<strong>10å€‹ä¸­7ã€œ8å€‹</strong>ã¯èª­ã‚ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ãŒã€æ®‹ã‚Šã¯ã€Œç‰¹åˆ¥ãªèª­ã¿æ–¹ã€ã¨ã—ã¦åˆ¥ã«è¦šãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
                        </p>
                    </div>
                </section>

                <!-- ãƒ«ãƒ¼ãƒ«ã«ã¨ã‚‰ã‚ã‚Œã‚„ã™ã„å­ã¸ã®æ³¨æ„ -->
                <section>
                    <h3 class="text-xl font-bold text-gray-800 mb-3">ğŸ§’ ãƒ«ãƒ¼ãƒ«ã«ã¨ã‚‰ã‚ã‚Œã‚„ã™ã„ãŠå­ã•ã‚“ã¸</h3>
                    <div class="bg-blue-50 border-2 border-blue-300 rounded-lg p-4">
                        <p class="text-gray-700 mb-3 text-base">
                            ç™ºé”ç‰¹æ€§ã¨ã—ã¦<strong>ãƒ«ãƒ¼ãƒ«ã‚’å³å¯†ã«å®ˆã‚ã†ã¨ã™ã‚‹å‚¾å‘</strong>ãŒå¼·ã„ãŠå­ã•ã‚“ã®å ´åˆã€ä¾‹å¤–ã‚’å—ã‘å…¥ã‚Œã‚‰ã‚Œãšæ··ä¹±ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
                        </p>
                        <p class="text-base text-gray-700 font-bold mb-2">ğŸ’¡ ãŠã™ã™ã‚ã®å£°ã‹ã‘ï¼š</p>
                        <ul class="text-sm text-gray-600 list-disc list-inside space-y-1 ml-2">
                            <li>ã€Œè‹±èªã«ã¯"ã ã„ãŸã„å½“ã¦ã¯ã¾ã‚‹ãƒ«ãƒ¼ãƒ«"ãŒãŸãã•ã‚“ã‚ã‚‹ã‚“ã ã‚ˆã€</li>
                            <li>ã€Œcomeã¯ç‰¹åˆ¥ãƒãƒ¼ãƒ ã€‚æ˜”ã®äººãŒä½¿ã„ã‚„ã™ã„ã‚ˆã†ã«å¤‰ãˆã¡ã‚ƒã£ãŸã‚“ã ã£ã¦ã€</li>
                            <li>ã€Œãƒ«ãƒ¼ãƒ«é€šã‚Šã˜ã‚ƒãªã„å˜èªã‚’è¦‹ã¤ã‘ãŸã‚‰ã€"ãƒ¬ã‚¢ã‚«ãƒ¼ãƒ‰ç™ºè¦‹ï¼"ã£ã¦æ¥½ã—ã‚‚ã†ã€</li>
                        </ul>
                    </div>
                </section>

                <!-- è©³ã—ã„æƒ…å ±ã¸ã®ãƒªãƒ³ã‚¯ -->
                <section>
                    <div class="bg-green-50 border-2 border-green-300 rounded-lg p-4 text-center">
                        <p class="text-gray-700 mb-3 text-base">
                            ğŸ“š <strong>åŠ¹æœçš„ãªä½¿ã„æ–¹ãƒ»ç™ºé”ç‰¹æ€§ã«å¿œã˜ãŸå·¥å¤«</strong>ãªã©ã€<br>
                            è©³ã—ã„æƒ…å ±ã¯noteè¨˜äº‹ã‚’ã”è¦§ãã ã•ã„
                        </p>
                        <a href="https://note.com/mypeco_poco/n/nafb21903e0d8" target="_blank" class="inline-block bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg mt-2 transform hover:scale-105 transition">
                            ğŸ“ noteè¨˜äº‹ã‚’èª­ã‚€
                        </a>
                    </div>
                </section>
            </div>

            <button onclick="closeModal()" class="mt-6 w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-lg transform hover:scale-105 transition">
                é–‰ã˜ã‚‹
            </button>
        </div>
    </div>

    <script>
        // ãƒã‚¸ãƒƒã‚¯eå˜èªãƒ‡ãƒ¼ã‚¿ï¼ˆå…¨25å€‹ï¼‰
        const allWords = [
            // a â†’ Ä ã®å˜èªï¼ˆ6å€‹ï¼‰
            { word: 'make', jp: '<ruby>ä½œ<rt>ã¤ã</rt></ruby>ã‚‹', emoji: 'ğŸ› ï¸', letters: ['m', 'a', 'k', 'e'], blanks: [1, 3] },
            { word: 'take', jp: '<ruby>å–<rt>ã¨</rt></ruby>ã‚‹', emoji: 'âœ‹', letters: ['t', 'a', 'k', 'e'], blanks: [1, 3] },
            { word: 'cake', jp: 'ã‚±ãƒ¼ã‚­', emoji: 'ğŸ°', letters: ['c', 'a', 'k', 'e'], blanks: [1, 3] },
            { word: 'lake', jp: '<ruby>æ¹–<rt>ã¿ãšã†ã¿</rt></ruby>', emoji: 'ğŸï¸', letters: ['l', 'a', 'k', 'e'], blanks: [1, 3] },
            { word: 'wake', jp: '<ruby>èµ·<rt>ãŠ</rt></ruby>ãã‚‹', emoji: 'â°', letters: ['w', 'a', 'k', 'e'], blanks: [1, 3] },
            { word: 'safe', jp: '<ruby>å®‰å…¨<rt>ã‚ã‚“ãœã‚“</rt></ruby>ãª', emoji: 'ğŸ›¡ï¸', letters: ['s', 'a', 'f', 'e'], blanks: [1, 3] },
            
            // i â†’ Ä« ã®å˜èªï¼ˆ6å€‹ï¼‰
            { word: 'like', jp: '<ruby>å¥½<rt>ã™</rt></ruby>ã', emoji: 'ğŸ’•', letters: ['l', 'i', 'k', 'e'], blanks: [1, 3] },
            { word: 'bike', jp: '<ruby>è‡ªè»¢è»Š<rt>ã˜ã¦ã‚“ã—ã‚ƒ</rt></ruby>', emoji: 'ğŸš²', letters: ['b', 'i', 'k', 'e'], blanks: [1, 3] },
            { word: 'ride', jp: '<ruby>ä¹—<rt>ã®</rt></ruby>ã‚‹', emoji: 'ğŸ¢', letters: ['r', 'i', 'd', 'e'], blanks: [1, 3] },
            { word: 'time', jp: '<ruby>æ™‚é–“<rt>ã˜ã‹ã‚“</rt></ruby>', emoji: 'â°', letters: ['t', 'i', 'm', 'e'], blanks: [1, 3] },
            { word: 'five', jp: '5', emoji: '5ï¸âƒ£', letters: ['f', 'i', 'v', 'e'], blanks: [1, 3] },
            { word: 'nine', jp: '9', emoji: '9ï¸âƒ£', letters: ['n', 'i', 'n', 'e'], blanks: [1, 3] },
            
            // o â†’ Å ã®å˜èªï¼ˆ6å€‹ï¼‰
            { word: 'home', jp: '<ruby>å®¶<rt>ã„ãˆ</rt></ruby>', emoji: 'ğŸ ', letters: ['h', 'o', 'm', 'e'], blanks: [1, 3] },
            { word: 'nose', jp: '<ruby>é¼»<rt>ã¯ãª</rt></ruby>', emoji: 'ğŸ‘ƒ', letters: ['n', 'o', 's', 'e'], blanks: [1, 3] },
            { word: 'rope', jp: 'ãƒ­ãƒ¼ãƒ—', emoji: 'ğŸª¢', letters: ['r', 'o', 'p', 'e'], blanks: [1, 3] },
            { word: 'bone', jp: '<ruby>éª¨<rt>ã»ã­</rt></ruby>', emoji: 'ğŸ¦´', letters: ['b', 'o', 'n', 'e'], blanks: [1, 3] },
            { word: 'phone', jp: '<ruby>é›»è©±<rt>ã§ã‚“ã‚</rt></ruby>', emoji: 'ğŸ“±', letters: ['p', 'h', 'o', 'n', 'e'], blanks: [2, 4] },
            { word: 'June', jp: '6<ruby>æœˆ<rt>ãŒã¤</rt></ruby>', emoji: 'ğŸ“…', letters: ['J', 'u', 'n', 'e'], blanks: [1, 3] },
            
            // u â†’ Å« ã®å˜èªï¼ˆ2å€‹ï¼‰
            { word: 'use', jp: '<ruby>ä½¿<rt>ã¤ã‹</rt></ruby>ã†', emoji: 'ğŸ”§', letters: ['u', 's', 'e'], blanks: [0, 2] },
            { word: 'cute', jp: 'ã‹ã‚ã„ã„', emoji: 'ğŸ¥°', letters: ['c', 'u', 't', 'e'], blanks: [1, 3] },
            
            // ãã®ä»–ã®å˜èªï¼ˆ5å€‹ï¼‰
            { word: 'name', jp: '<ruby>åå‰<rt>ãªã¾ãˆ</rt></ruby>', emoji: 'ğŸ“›', letters: ['n', 'a', 'm', 'e'], blanks: [1, 3] },
            { word: 'game', jp: 'ã‚²ãƒ¼ãƒ ', emoji: 'ğŸ®', letters: ['g', 'a', 'm', 'e'], blanks: [1, 3] },
            { word: 'nice', jp: '<ruby>ç´ æ•µ<rt>ã™ã¦ã</rt></ruby>ãª', emoji: 'ğŸ˜Š', letters: ['n', 'i', 'c', 'e'], blanks: [1, 3] },
            { word: 'fine', jp: '<ruby>å…ƒæ°—<rt>ã’ã‚“ã</rt></ruby>ãª', emoji: 'ğŸ‘', letters: ['f', 'i', 'n', 'e'], blanks: [1, 3] },
            { word: 'white', jp: '<ruby>ç™½<rt>ã—ã‚</rt></ruby>ã„', emoji: 'âšª', letters: ['w', 'h', 'i', 't', 'e'], blanks: [2, 4] }
        ];

        let quizWords = [];
        let currentQuestionIndex = 0;
        let userAnswers = []; // 2ã¤ã®å›ç­”ã‚’ä¿å­˜
        let currentBlankIndex = 0; // ç¾åœ¨ã©ã¡ã‚‰ã®ç©ºæ¬„ã‚’ç­”ãˆã¦ã„ã‚‹ã‹ï¼ˆ0 or 1ï¼‰
        let correctCount = 0;
        let isAnswered = false;
        let isQuizStarted = false;
        let wrongAnswers = [];
        let showRecords = false;

        // ãƒ¢ãƒ¼ãƒ€ãƒ«åˆ¶å¾¡
        function openModal() {
            document.getElementById('infoModal').classList.add('show');
        }

        function closeModal() {
            document.getElementById('infoModal').classList.remove('show');
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
        window.onclick = function(event) {
            const modal = document.getElementById('infoModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // ãƒ©ãƒ³ãƒ€ãƒ ã«10å•ã‚’é¸ã¶
        function startQuiz() {
            const shuffled = [...allWords].sort(() => Math.random() - 0.5);
            quizWords = shuffled.slice(0, 10);
            currentQuestionIndex = 0;
            userAnswers = [];
            currentBlankIndex = 0;
            correctCount = 0;
            isAnswered = false;
            isQuizStarted = true;
            wrongAnswers = [];
            render();
        }

        // LocalStorageã‹ã‚‰è¨˜éŒ²ã‚’èª­ã¿è¾¼ã‚€
        function loadRecords() {
            const saved = localStorage.getItem('magicERecords');
            return saved ? JSON.parse(saved) : [];
        }

        // LocalStorageã«è¨˜éŒ²ã‚’ä¿å­˜ã™ã‚‹
        function saveRecord(record) {
            const records = loadRecords();
            records.push(record);
            localStorage.setItem('magicERecords', JSON.stringify(records));
        }

        // å…¨è¨˜éŒ²ã‚’å‰Šé™¤
        function clearAllRecords() {
            if (confirm('æœ¬å½“ã«å…¨ã¦ã®è¨˜éŒ²ã‚’å‰Šé™¤ã—ã¾ã™ã‹?')) {
                localStorage.removeItem('magicERecords');
                render();
            }
        }

        // å›ç­”å‡¦ç†
        function handleAnswer(value) {
            if (isAnswered) return;
            
            const currentWord = quizWords[currentQuestionIndex];
            userAnswers[currentBlankIndex] = value;
            
            // 1ã¤ç›®ã®æ¯éŸ³ã‚’ç­”ãˆãŸå ´åˆ
            if (currentBlankIndex === 0) {
                currentBlankIndex = 1;
                render();
            } else {
                // 2ã¤ç›®ã®æ¯éŸ³ã‚’ç­”ãˆãŸå ´åˆ â†’ åˆ¤å®š
                const correctVowel1 = currentWord.letters[currentWord.blanks[0]];
                const correctVowel2 = currentWord.letters[currentWord.blanks[1]];
                const isCorrect = userAnswers[0] === correctVowel1 && userAnswers[1] === correctVowel2;
                
                if (isCorrect) {
                    correctCount++;
                } else {
                    wrongAnswers.push({
                        word: currentWord.word,
                        jp: currentWord.jp,
                        correct: `${correctVowel1}, ${correctVowel2}`,
                        answer: `${userAnswers[0]}, ${userAnswers[1]}`
                    });
                }
                
                isAnswered = true;
                render();
                
                // è‡ªå‹•ã§èª­ã¿ä¸Šã’
                setTimeout(() => {
                    speak(currentWord.word);
                }, 300);
            }
        }

        // æ¬¡ã®å•é¡Œã¸
        function nextQuestion() {
            if (currentQuestionIndex < quizWords.length - 1) {
                currentQuestionIndex++;
                userAnswers = [];
                currentBlankIndex = 0;
                isAnswered = false;
                render();
            } else {
                showResult();
            }
        }

        // çµæœç”»é¢
        function showResult() {
            isQuizStarted = false;
            
            const now = new Date();
            const dateStr = `${now.getFullYear()}/${(now.getMonth()+1).toString().padStart(2,'0')}/${now.getDate().toString().padStart(2,'0')} ${now.getHours().toString().padStart(2,'0')}:${now.getMinutes().toString().padStart(2,'0')}`;
            const accuracy = Math.round((correctCount / quizWords.length) * 100);
            
            saveRecord({
                date: dateStr,
                accuracy: accuracy,
                correct: correctCount,
                total: quizWords.length,
                wrongAnswers: [...wrongAnswers]
            });
            
            render();
        }

        function speak(text) {
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US';
            utterance.rate = 0.7;
            window.speechSynthesis.speak(utterance);
        }

        function getVowelColor(vowel) {
            const colors = {
                'a': 'red',
                'e': 'blue',
                'i': 'green',
                'o': 'orange',
                'u': 'purple'
            };
            return colors[vowel] || 'gray';
        }

        function render() {
            // è¨˜éŒ²ãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤º
            if (showRecords) {
                const records = loadRecords();
                document.getElementById('app').innerHTML = `
                    <div class="flex items-center justify-center min-h-screen py-8">
                        <div class="bg-white rounded-3xl shadow-2xl p-8 max-w-4xl w-full">
                            <div class="flex justify-between items-center mb-6">
                                <h1 class="text-4xl font-bold text-blue-600">ğŸ“‹ å­¦ç¿’è¨˜éŒ²</h1>
                                <button onclick="showRecords = false; render();" class="bg-gray-500 hover:bg-gray-600 text-white text-lg font-bold px-6 py-3 rounded-xl shadow-lg transform hover:scale-105 transition">
                                    â† æˆ»ã‚‹
                                </button>
                            </div>
                            
                            ${records.length === 0 ? `
                                <div class="text-center py-12">
                                    <p class="text-2xl text-gray-500 mb-4">ğŸ“ ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</p>
                                    <p class="text-lg text-gray-400">ã‚¯ã‚¤ã‚ºã‚’å®Œäº†ã™ã‚‹ã¨è‡ªå‹•çš„ã«è¨˜éŒ²ã•ã‚Œã¾ã™</p>
                                </div>
                            ` : `
                                <div class="mb-4 flex justify-end">
                                    <button onclick="clearAllRecords()" class="bg-red-500 hover:bg-red-600 text-white text-sm font-bold px-4 py-2 rounded-lg shadow-lg transform hover:scale-105 transition">
                                        ğŸ—‘ï¸ ä¸€æ‹¬å‰Šé™¤
                                    </button>
                                </div>
                                
                                <div class="space-y-3 max-h-[600px] overflow-y-auto">
                                    ${records.reverse().map((record, index) => `
                                        <div class="bg-gradient-to-r from-blue-50 to-green-50 border-2 border-blue-200 rounded-xl p-4">
                                            <div class="flex items-center justify-between gap-4">
                                                <span class="text-sm font-bold text-gray-700 whitespace-nowrap">ğŸ“… ${record.date}</span>
                                                <span class="text-xl font-bold whitespace-nowrap ${record.accuracy === 100 ? 'text-green-600' : record.accuracy >= 80 ? 'text-blue-600' : record.accuracy >= 60 ? 'text-orange-600' : 'text-red-600'}">
                                                    ${record.accuracy}% (${record.correct}/${record.total})
                                                </span>
                                                <div class="flex-1 min-w-0">
                                                    ${record.wrongAnswers && record.wrongAnswers.length > 0 ? `
                                                        <div class="flex items-center gap-2">
                                                            <span class="text-xs font-bold text-red-600 whitespace-nowrap">âŒ</span>
                                                            <div class="flex flex-wrap gap-1">
                                                                ${record.wrongAnswers.map(wa => `
                                                                    <span class="inline-block bg-red-50 px-2 py-0.5 rounded text-xs font-bold text-gray-800">
                                                                        ${wa.word}
                                                                    </span>
                                                                `).join('')}
                                                            </div>
                                                        </div>
                                                    ` : `
                                                        <span class="text-xs font-bold text-green-700">ğŸ‰ å…¨å•æ­£è§£ï¼</span>
                                                    `}
                                                </div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            `}
                        </div>
                    </div>
                `;
                return;
            }

            if (!isQuizStarted) {
                if (quizWords.length === 0) {
                    // ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢
                    document.getElementById('app').innerHTML = `
                        <div class="flex items-center justify-center min-h-screen">
                            <div class="bg-white rounded-3xl shadow-2xl p-12 text-center max-w-2xl">
                                <h1 class="text-5xl font-bold text-blue-600 mb-6">âœ¨ ãƒã‚¸ãƒƒã‚¯e<br>ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰</h1>
                                <p class="text-2xl text-gray-700 mb-4">2ã¤ã®æ¯éŸ³ã‚’é¸ã¼ã†ï¼</p>
                                <div class="bg-blue-50 border-2 border-blue-300 rounded-lg p-6 mb-8">
                                    <p class="text-lg text-gray-700 mb-3">ğŸ“ <strong>å…¨25å€‹</strong>ã®å˜èªã‹ã‚‰<strong>ãƒ©ãƒ³ãƒ€ãƒ ã«10å•</strong>å‡ºé¡Œã•ã‚Œã¾ã™</p>
                                    <p class="text-lg text-gray-700 mb-3">âœ¨ æœ€å¾Œã®<strong>e</strong>ãŒã‚ã‚‹ã¨ã€<br>æœ€åˆã®æ¯éŸ³ãŒ<strong>ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆèª­ã¿</strong>ã«ãªã‚‹ã‚ˆï¼</p>
                                    <p class="text-lg text-gray-700 mb-3">ğŸ”Š å›ç­”ã™ã‚‹ã¨<strong>è‡ªå‹•ã§èª­ã¿ä¸Šã’</strong>ã•ã‚Œã¾ã™</p>
                                    <p class="text-lg text-gray-700">â¡ï¸ ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦æ¬¡ã®å•é¡Œã¸é€²ã‚‚ã†ï¼</p>
                                </div>
                                <button onclick="startQuiz()" class="bg-blue-500 hover:bg-blue-600 text-white text-3xl font-bold px-12 py-6 rounded-2xl shadow-lg transform hover:scale-105 transition mb-4">
                                    ğŸš€ ã‚¹ã‚¿ãƒ¼ãƒˆï¼
                                </button>
                                <div class="flex justify-center gap-3">
                                    <button onclick="showRecords = true; render();" class="bg-gray-500 hover:bg-gray-600 text-white text-sm font-bold px-6 py-3 rounded-xl shadow-lg transform hover:scale-105 transition">
                                        ğŸ“‹ è¨˜éŒ²ã‚’è¦‹ã‚‹
                                    </button>
                                    <button onclick="openModal()" class="bg-purple-500 hover:bg-purple-600 text-white text-sm font-bold px-6 py-3 rounded-xl shadow-lg transform hover:scale-105 transition">
                                        ğŸ“˜ ä¿è­·è€…ãƒ»æ•™è‚²è€…ã®æ–¹ã¸
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                } else {
                    // çµæœç”»é¢
                    const score = Math.round((correctCount / quizWords.length) * 100);
                    let message = '';
                    let emoji = '';
                    if (score === 100) {
                        message = 'ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆï¼ã™ã”ã„ï¼';
                        emoji = 'ğŸ‰ğŸ†âœ¨';
                    } else if (score >= 80) {
                        message = 'ã‚ˆãã§ãã¾ã—ãŸï¼';
                        emoji = 'ğŸŠğŸ‘';
                    } else if (score >= 60) {
                        message = 'ãŒã‚“ã°ã‚Šã¾ã—ãŸï¼';
                        emoji = 'ğŸ’ªğŸ˜Š';
                    } else {
                        message = 'ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã—ã¦ã¿ã‚ˆã†ï¼';
                        emoji = 'ğŸ“šğŸ’¡';
                    }

                    document.getElementById('app').innerHTML = `
                        <div class="flex items-center justify-center min-h-screen">
                            <div class="bg-white rounded-3xl shadow-2xl p-12 text-center max-w-2xl">
                                <h1 class="text-5xl font-bold text-blue-600 mb-6">ğŸ¯ çµæœç™ºè¡¨</h1>
                                <div class="text-8xl mb-6">${emoji}</div>
                                <p class="text-3xl font-bold text-gray-800 mb-4">${message}</p>
                                <div class="bg-gradient-to-r from-blue-50 to-green-50 border-2 border-blue-300 rounded-2xl p-8 mb-8">
                                    <p class="text-6xl font-bold text-blue-600 mb-4">${correctCount} / ${quizWords.length}</p>
                                    <p class="text-4xl font-bold text-green-600">${score}%</p>
                                </div>
                                <button onclick="location.reload()" class="bg-green-500 hover:bg-green-600 text-white text-2xl font-bold px-10 py-5 rounded-2xl shadow-lg transform hover:scale-105 transition mb-4">
                                    ğŸ”„ ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹
                                </button>
                                <div class="flex justify-center gap-3">
                                    <button onclick="showRecords = true; render();" class="bg-gray-500 hover:bg-gray-600 text-white text-sm font-bold px-6 py-3 rounded-xl shadow-lg transform hover:scale-105 transition">
                                        ğŸ“‹ è¨˜éŒ²ã‚’è¦‹ã‚‹
                                    </button>
                                    <button onclick="openModal()" class="bg-purple-500 hover:bg-purple-600 text-white text-sm font-bold px-6 py-3 rounded-xl shadow-lg transform hover:scale-105 transition">
                                        ğŸ“˜ ä¿è­·è€…ãƒ»æ•™è‚²è€…ã®æ–¹ã¸
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                }
                return;
            }

            // ã‚¯ã‚¤ã‚ºç”»é¢
            const currentWord = quizWords[currentQuestionIndex];
            const progress = currentQuestionIndex + 1;
            const correctVowel1 = currentWord.letters[currentWord.blanks[0]];
            const correctVowel2 = currentWord.letters[currentWord.blanks[1]];
            const isCorrect = isAnswered && userAnswers[0] === correctVowel1 && userAnswers[1] === correctVowel2;
            const isIncorrect = isAnswered && !isCorrect;

            document.getElementById('app').innerHTML = `
                <div class="flex items-center justify-center min-h-screen">
                    <div class="bg-white rounded-3xl shadow-2xl p-12 max-w-3xl w-full">
                        <!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ -->
                        <div class="mb-4">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-xl font-bold text-gray-600">å•é¡Œ ${progress} / ${quizWords.length}</span>
                                <span class="text-xl font-bold text-green-600">âœ“ ${correctCount}å•æ­£è§£</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-4">
                                <div class="bg-blue-500 h-4 rounded-full transition-all duration-300" style="width: ${(progress / quizWords.length) * 100}%"></div>
                            </div>
                        </div>

                        <!-- æ—¥æœ¬èªã®æ„å‘³ -->
                        <div class="text-center mb-4">
                            <p class="text-6xl font-bold text-gray-800 mb-2">${currentWord.jp} ${currentWord.emoji}</p>
                            ${!isAnswered ? `
                                <button onclick="speak('${currentWord.word}')" class="bg-blue-500 hover:bg-blue-600 text-white text-xl font-bold px-6 py-3 rounded-xl shadow-lg transform hover:scale-105 transition flex items-center gap-2 mx-auto">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15.536a5 5 0 001.414 1.414m2.828-2.828a9 9 0 000-12.728M12 18v.01"></path></svg>
                                    <span>ğŸ”Š èã</span>
                                </button>
                            ` : ''}
                        </div>

                        <!-- å˜èªãƒœãƒƒã‚¯ã‚¹ -->
                        <div class="flex items-center justify-center gap-2 mb-6">
                            ${currentWord.letters.map((letter, index) => {
                                const isBlank1 = index === currentWord.blanks[0];
                                const isBlank2 = index === currentWord.blanks[1];
                                
                                if (isBlank1) {
                                    const answered = userAnswers[0];
                                    const bgColor = isAnswered ? 
                                        (answered === correctVowel1 ? 'bg-green-200 border-4 border-green-500' : 'bg-red-200 border-4 border-red-500') :
                                        (answered ? 'bg-blue-100 border-4 border-blue-400' : 'bg-yellow-100 border-4 border-yellow-400');
                                    return `
                                        <div class="letter-box ${bgColor}" style="width: 70px; height: 70px; font-size: 2rem;">
                                            ${answered || '?'}
                                        </div>
                                    `;
                                } else if (isBlank2) {
                                    const answered = userAnswers[1];
                                    const bgColor = isAnswered ? 
                                        (answered === correctVowel2 ? 'bg-green-200 border-4 border-green-500' : 'bg-red-200 border-4 border-red-500') :
                                        (answered ? 'bg-blue-100 border-4 border-blue-400' : currentBlankIndex === 1 ? 'bg-yellow-100 border-4 border-yellow-400' : 'bg-gray-100 border-2 border-gray-300');
                                    return `
                                        <div class="letter-box ${bgColor}" style="width: 70px; height: 70px; font-size: 2rem;">
                                            ${answered || '?'}
                                        </div>
                                    `;
                                } else {
                                    return `
                                        <div class="letter-box bg-gray-200 text-gray-700" style="width: 70px; height: 70px; font-size: 2rem;">
                                            ${letter}
                                        </div>
                                    `;
                                }
                            }).join('')}
                        </div>

                        ${!isAnswered ? `
                            <!-- å›ç­”ãƒœã‚¿ãƒ³ -->
                            <div class="mb-4 text-center">
                                <p class="text-xl font-bold text-blue-600 mb-2">
                                    ${currentBlankIndex === 0 ? '1ã¤ç›®ã®æ¯éŸ³ã‚’é¸ã‚“ã§ã­ï¼' : '2ã¤ç›®ã®æ¯éŸ³ã‚’é¸ã‚“ã§ã­ï¼'}
                                </p>
                            </div>
                            <div class="grid grid-cols-5 gap-3 mb-4">
                                ${['a', 'e', 'i', 'o', 'u'].map(v => {
                                    const vColor = getVowelColor(v);
                                    return `
                                        <button onclick="handleAnswer('${v}')" class="bg-${vColor}-500 hover:bg-${vColor}-600 text-white text-4xl font-bold py-6 rounded-xl shadow-lg transform hover:scale-105 transition">
                                            ${v}
                                        </button>
                                    `;
                                }).join('')}
                            </div>
                        ` : `
                            <!-- çµæœè¡¨ç¤º -->
                            <div class="mb-4">
                                ${isCorrect ? `
                                    <div class="bg-green-100 border-4 border-green-500 rounded-xl p-4 text-center">
                                        <p class="text-4xl mb-2">ğŸ‰</p>
                                        <p class="text-2xl font-bold text-green-700 mb-2">æ­£è§£ï¼</p>
                                        <p class="text-7xl font-bold text-gray-800 mb-3">${currentWord.word}</p>
                                        <button onclick="speak('${currentWord.word}')" class="bg-yellow-50 border-2 border-yellow-400 rounded-lg p-2 mb-2  w-full hover:bg-yellow-100 cursor-pointer">
                                            <p class="text-xl text-yellow-700 font-bold">ğŸ˜„ è¨€ã£ã¦ã¿ã‚ˆã†ï¼</p>
                                        </button>
                                        <div class="bg-blue-50 border-2 border-blue-400 rounded-lg p-2 mt-2">
                                            <p class="text-base text-blue-700 font-bold">âœ¨ ãƒã‚¸ãƒƒã‚¯eï¼</p>
                                            <p class="text-sm text-gray-700 mt-1"><span class="font-bold text-${getVowelColor(correctVowel1)}-600">${correctVowel1}</span> ãŒ <span class="font-bold text-blue-600">ã€Œ${correctVowel1.toUpperCase()}ã€</span> ã¨èª­ã‚€ã‚ˆï¼</p>
                                        </div>
                                    </div>
                                ` : `
                                    <div class="bg-blue-100 border-4 border-blue-500 rounded-xl p-4 text-center">
                                        <p class="text-lg text-gray-600 mb-2">æ­£ã—ã„ç­”ãˆã¯ <span class="font-bold text-${getVowelColor(correctVowel1)}-600 text-4xl">${correctVowel1}</span> ã¨ <span class="font-bold text-${getVowelColor(correctVowel2)}-600 text-4xl">${correctVowel2}</span> ã ã‚ˆï¼</p>
                                        <p class="text-7xl font-bold text-gray-800 mb-2">${currentWord.word}</p>
                                        <button onclick="speak('${currentWord.word}')" class="bg-yellow-50 border-2 border-yellow-400 rounded-lg p-2 mb-2 w-full hover:bg-yellow-100 cursor-pointer">
                                            <p class="text-xl text-yellow-700 font-bold">ğŸ˜„ è¨€ã£ã¦ã¿ã‚ˆã†ï¼</p>
                                        </button>
                                        <div class="bg-blue-50 border-2 border-blue-400 rounded-lg p-2">
                                            <p class="text-base text-blue-700 font-bold">âœ¨ ãƒã‚¸ãƒƒã‚¯eï¼</p>
                                            <p class="text-sm text-gray-700 mt-1"><span class="font-bold text-${getVowelColor(correctVowel1)}-600">${correctVowel1}</span> ãŒ <span class="font-bold text-blue-600">ã€Œ${correctVowel1.toUpperCase()}ã€</span> ã¨èª­ã‚€ã‚ˆï¼</p>
                                        </div>
                                    </div>
                                `}
                            </div>

                            <!-- æ¬¡ã¸ãƒœã‚¿ãƒ³ -->
                            <button onclick="nextQuestion()" class="w-full bg-blue-500 hover:bg-blue-600 text-white text-2xl font-bold py-4 rounded-xl shadow-lg transform hover:scale-105 transition">
                                ${currentQuestionIndex < quizWords.length - 1 ? 'â¡ï¸ æ¬¡ã®å•é¡Œã¸' : 'ğŸ“Š çµæœã‚’è¦‹ã‚‹'}
                            </button>
                        `}
                    </div>
                </div>
            `;
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«åˆæœŸåŒ–ï¼†æç”»
        render();
    </script>
</body>
</html>
